- name: Configuração inicial da instância EC2
  hosts: ec2
  become: yes
  ansible_python_interpreter: /usr/bin/python3
  tasks:

    - name: Instalar pacotes básicos
      ansible.builtin.yum:
        name:
          - python3
          - python3-pip
        state: present

    - name: Instalar bibliotecas Python necessárias
      ansible.builtin.pip:
        name:
          - boto3
          - pandas

    - name: Criar diretórios de dados
      ansible.builtin.file:
        path: "/data/{{ item }}"
        state: directory
        owner: ec2-user
        group: ec2-user
        mode: '0755'
      loop:
        - raw
        - trusted
        - client
